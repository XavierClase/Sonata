import{u as S,p as m,D as O,b as f,h as o,k as t,x as a,v as p,F as U,f as n,o as r,d as _,e as g,O as q,t as C,y as x,P as j,ac as D,ae as K}from"./app-BArZ-JoB.js";import{u as L}from"./albumesAdmin-wFGr6eia.js";const R={class:"grid"},G={class:"col-12"},H={class:"card"},J={class:"badge bg-secondary"},P={class:"badge bg-info"},Q=["src"],W={key:1,class:"pi pi-image text-gray-400",style:{"font-size":"1.5rem"}},te={__name:"Index",setup(X){const{albumes:I,getAlbumes:y,deleteAlbum:T}=L(),{can:b}=S(),d=m({global:{value:null,matchMode:D.CONTAINS}}),u=m(!1),v=m(null),h=m(null),N=()=>{d.value={global:{value:null,matchMode:D.CONTAINS}}},A=(c,e)=>{v.value=c,h.value=e,u.value=!0},w=()=>{T(v.value).then(()=>{u.value=!1,v.value=null,h.value=null}).catch(c=>{console.error("Error al eliminar el álbum:",c)})};return O(()=>{y()}),(c,e)=>{const F=n("InputIcon"),B=n("InputText"),V=n("IconField"),i=n("Button"),z=n("Toolbar"),s=n("Column"),M=n("router-link"),$=n("DataTable"),E=n("Dialog"),k=K("tooltip");return r(),f(U,null,[e[10]||(e[10]=o("div",{class:"show"},null,-1)),o("div",R,[o("div",G,[o("div",H,[e[9]||(e[9]=o("div",{class:"card-header bg-transparent ps-0 pe-0"},[o("h5",{class:"float-start mb-0"},"Álbumes")],-1)),t($,{filters:d.value,"onUpdate:filters":e[4]||(e[4]=l=>d.value=l),value:p(I).data,paginator:"",rows:5,globalFilterFields:["id","nombre","tipo","creador","created_at"],stripedRows:"",dataKey:"id",size:"small"},{header:a(()=>[t(z,{"pt:root:class":"toolbar-table"},{start:a(()=>[t(V,null,{default:a(()=>[t(F,{class:"pi pi-search"}),t(B,{modelValue:d.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value.global.value=l),placeholder:"Buscar"},null,8,["modelValue"])]),_:1}),t(i,{type:"button",icon:"pi pi-filter-slash",label:"Limpiar",class:"ml-1",outlined:"",onClick:e[1]||(e[1]=l=>N())}),t(i,{type:"button",icon:"pi pi-refresh",class:"h-100 ml-1",outlined:"",onClick:e[2]||(e[2]=l=>p(y)())})]),end:a(()=>[p(b)("album-create")?(r(),_(i,{key:0,icon:"pi pi-plus",label:"Crear Álbum",onClick:e[3]||(e[3]=l=>c.$router.push("albumes/create")),class:"float-end"})):g("",!0)]),_:1})]),empty:a(()=>e[7]||(e[7]=[q("No se encontraron álbumes.")])),default:a(()=>[t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"nombre",header:"Nombre",sortable:""}),t(s,{field:"tipo",header:"Tipo",sortable:""},{body:a(l=>[o("span",J,C(l.data.tipo),1)]),_:1}),t(s,{field:"artista",header:"Artista",sortable:""}),t(s,{field:"num_canciones",header:"Canciones",sortable:""},{body:a(l=>[o("span",P,C(l.data.num_canciones),1)]),_:1}),t(s,{field:"duracion_total",header:"Duración",sortable:""}),t(s,{field:"created_at",header:"Creado el",sortable:""}),t(s,{field:"updated_at",header:"Actualizado el",sortable:""}),t(s,{header:"Portada"},{body:a(l=>[l.data.portada?(r(),f("img",{key:0,src:l.data.portada,alt:"Portada",style:{height:"40px",width:"40px","object-fit":"cover","border-radius":"4px"}},null,8,Q)):(r(),f("span",W))]),_:1}),t(s,{class:"pe-0 me-0 icon-column-3"},{body:a(l=>[p(b)("album-edit")?(r(),_(M,{key:0,to:{name:"albumes.edit",params:{id:l.data.id}}},{default:a(()=>[x(t(i,{icon:"pi pi-pencil",severity:"info",size:"small",class:"mr-1"},null,512),[[k,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"])):g("",!0),p(b)("album-delete")?x((r(),_(i,{key:1,icon:"pi pi-trash",severity:"danger",onClick:j(Y=>A(l.data.id,l.index),["prevent"]),size:"small"},null,8,["onClick"])),[[k,"Eliminar",void 0,{top:!0}]]):g("",!0)]),_:1})]),_:1},8,["filters","value"]),t(E,{visible:u.value,"onUpdate:visible":e[6]||(e[6]=l=>u.value=l),style:{width:"450px"},header:"Confirmar",modal:!0,appendTo:".show"},{footer:a(()=>[t(i,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=l=>u.value=!1)}),t(i,{label:"Sí",icon:"pi pi-check",class:"p-button-danger",onClick:w})]),default:a(()=>[e[8]||(e[8]=o("div",{class:"confirmation-content"},[o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),o("span",null,"¿Estás seguro de que quieres eliminar este álbum?")],-1))]),_:1},8,["visible"])])])])],64)}}};export{te as default};
