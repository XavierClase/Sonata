import{M as ts,p as h,A as ns,C as is,D as rs,b as p,d as T,e as $,h as s,v as o,t as i,n as A,F as y,i as B,k as d,x as C,l as cs,f as u,o as r,J as N}from"./app-BArZ-JoB.js";import{a as ds,_ as us}from"./listaCanciones-BgB1a3n7.js";import{u as ps}from"./usePlayer-BvTy7vg6.js";import{m as ms}from"./mostrarMusica-BSXilRiR.js";import{d as _s,u as vs}from"./datosUser-Ca7kkzz-.js";import{_ as fs}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./player-Czj22g4O.js";const gs={class:"perfil-artista-banner"},bs={class:"perfil-artista-banner-img"},hs=["src"],Cs={class:"row perfil-artista-medio"},ks={class:"col-md-7 perfil-artista-medio-populares"},ys={class:"canciones-populares"},ws=["onClick"],xs={class:"cancion-popular-span1 col-md-2"},Ds={class:"num-cancion-popular"},Ps=["src"],Us={class:"cancion-popular-span2 col-md-5"},Is={class:"cancion-popular-nombre"},Ms={class:"cancion-popular-reproducciones"},Vs={class:"col-md-2 duracion-cancion"},Fs=["onClick"],Ls=["onClick"],Ts={class:"col-md-5 perfil-artista-medio-detalles"},$s={class:"detalles-contenido"},As={class:"detalles-img"},Bs=["src"],Ns={class:"detalles-descripcion"},zs={class:"perfil-artista-albums"},Es={class:"row gap-4"},js={class:"album-img"},Rs=["src"],Ss={class:"album-detalles"},Gs={class:"row"},Hs={class:"config-imagenes col-md-6"},Js={class:"imagen-config-perfil"},Ys=["src"],qs={class:"imagen-config-detalles"},Ks=["src"],Os={class:"col-md-6"},Qs={class:"flex items-center gap-4 mb-4"},Ws={class:"flex items-center gap-4 mb-8"},Xs={class:"flex justify-end gap-2"},Zs={__name:"perfil",setup(se){const w=ts(),{isPlaying:ee,playPlaylist:ae,playSong:z,togglePlay:oe}=ps(),m=h(null),_=h(!1),k=h(!1),x=ns().user,E=cs(),v=h(E.params.id),{populares:D,getPopulares:j,albumes:R,getAlbumesUser:S}=ms(v),{user:n,getUser:G}=_s(v),H=()=>{const l=window.location.href;navigator.clipboard.writeText(l).then(()=>{w.add({severity:"success",summary:"Enlace copiado",life:3e3})}).catch(e=>{w.add({severity:"error",summary:"Error al copiar",detail:e.message,life:3e3})})},J=is(()=>x&&n.value&&parseInt(x.id)===parseInt(v.value)),{PreviewImagenPerfil:Y,PreviewImagenDetalles:q,nombreUsuarioMod:f,descripcionUsuarioMod:g,manejarImagen:P,guardarCambios:K,fetchUserData:le}=vs(n,v,_),{cancionesFavoritas:te,cargarFavoritosCanciones:U,toggleLikeCancion:O,esFavoritaCancion:Q}=ds(),W=l=>{z(l,D.value,"album",l.album_id)},X=l=>{event.stopPropagation(),m.value=l},Z=async(l,e)=>{e.stopPropagation(),await O(l),await U()},c=l=>l?new URL(l,import.meta.url).href:"/images/placeholder1.jpg";return rs(async()=>{var l,e;await G(),await j(),await S(),await U(),f.value=((l=n.value)==null?void 0:l.name)||"",g.value=((e=n.value)==null?void 0:e.descripcion)||""}),(l,e)=>{var M,V,F,L;const ss=u("router-link"),es=u("InputText"),I=u("FloatLabel"),as=u("Textarea"),os=u("Button"),ls=u("Dialog");return r(),p(y,null,[m.value?(r(),T(us,{key:0,cancion:m.value,onClose:e[0]||(e[0]=a=>m.value=null)},null,8,["cancion"])):$("",!0),e[15]||(e[15]=s("div",{class:"showDialog"},null,-1)),s("div",gs,[s("span",null,[s("div",bs,[s("img",{src:c((M=o(n))==null?void 0:M.avatar)},null,8,hs)]),s("h1",null,i((V=o(n))==null?void 0:V.name),1)]),J.value?(r(),p("i",{key:0,class:A({"pi pi-cog":!0,"pi-spin":k.value}),style:{"font-size":"2rem"},onMouseover:e[1]||(e[1]=a=>k.value=!0),onMouseleave:e[2]||(e[2]=a=>k.value=!1),onClick:e[3]||(e[3]=a=>_.value=!0)},null,34)):$("",!0)]),s("i",{class:"pi pi-share-alt",onClick:H}),s("div",Cs,[s("div",ks,[e[9]||(e[9]=s("h2",null,"Canciones populares",-1)),s("div",ys,[(r(!0),p(y,null,B(o(D),(a,b)=>(r(),p("div",{key:a.id,class:"cancion-popular",onClick:t=>W(a)},[s("span",xs,[s("p",Ds,i(b+1),1),s("img",{src:c(a.portada)},null,8,Ps)]),s("span",Us,[s("p",Is,i(a.nombre),1),s("p",Ms,i(a.reproducciones)+" reproducciones",1)]),s("p",Vs,i(a.duracion),1),s("i",{class:A(o(Q)(a.id)?"pi pi-heart-fill col-md-1":"pi pi-heart col-md-1"),onClick:t=>Z(a.id,t),title:"Añadir la canción a favoritos"},null,10,Fs),s("i",{class:"pi pi-plus col-md-1",onClick:t=>X(a),title:"Añadir la canción a una lista"},null,8,Ls)],8,ws))),128))])]),s("div",Ts,[e[10]||(e[10]=s("h2",null,"Detalles",-1)),s("div",$s,[s("div",As,[s("img",{src:c((F=o(n))==null?void 0:F.fotoDetalles),alt:"Imagen de detalles del usuario artista"},null,8,Bs)]),s("div",Ns,[s("p",null,i((L=o(n))==null?void 0:L.descripcion),1)])])])]),s("div",zs,[e[11]||(e[11]=s("h2",null,"Álbumes",-1)),s("div",Es,[(r(!0),p(y,null,B(o(R),a=>(r(),T(ss,{class:"album col-md-2",key:a.id,to:{name:"app.album",params:{id:a.id}}},{default:C(()=>[s("div",js,[s("img",{src:c(a.portada)},null,8,Rs)]),s("div",Ss,[s("h4",null,i(a.nombre),1),s("p",null,"Año: "+i(new Date(a.created_at).getFullYear()),1),s("p",null,"Duración: "+i(a.duracion_total),1),s("p",null,"Número de canciones: "+i(a.num_canciones),1)])]),_:2},1032,["to"]))),128))])]),d(ls,{class:"banner-config-modal",visible:_.value,"onUpdate:visible":e[8]||(e[8]=a=>_.value=a),modal:"",header:"Modificar Perfil",appendTo:".showDialog"},{default:C(()=>{var a,b;return[e[14]||(e[14]=s("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Actualiza tu información.",-1)),s("div",Gs,[s("div",Hs,[s("div",Js,[s("img",{src:o(Y)||c((a=o(n))==null?void 0:a.avatar),class:"estilo_imagen"},null,8,Ys),s("input",{type:"file",onChange:e[4]||(e[4]=t=>o(P)(t,"perfil")),accept:"image/*",class:"añadir_archivo"},null,32)]),s("div",qs,[s("img",{src:o(q)||c((b=o(n))==null?void 0:b.fotoDetalles),class:"estilo_imagen"},null,8,Ks),s("input",{type:"file",onChange:e[5]||(e[5]=t=>o(P)(t,"detalles")),accept:"image/*",class:"añadir_archivo"},null,32)])]),s("div",Os,[s("div",Qs,[d(I,{variant:"on"},{default:C(()=>[d(es,{class:"banner-config-input",id:"username",modelValue:o(f),"onUpdate:modelValue":e[6]||(e[6]=t=>N(f)?f.value=t:null)},null,8,["modelValue"]),e[12]||(e[12]=s("label",{for:"username"},"Nombre de Usuario",-1))]),_:1})]),s("div",Ws,[d(I,{variant:"on"},{default:C(()=>[d(as,{class:"banner-config-input",id:"config-descripcion",rows:"5",cols:"30",style:{resize:"none"},maxlength:"185",modelValue:o(g),"onUpdate:modelValue":e[7]||(e[7]=t=>N(g)?g.value=t:null)},null,8,["modelValue"]),e[13]||(e[13]=s("label",{for:"descripcion"},"Descripción",-1))]),_:1})])])]),s("div",Xs,[d(os,{type:"button",label:"Guardar",onClick:o(K)},null,8,["onClick"])])]}),_:1},8,["visible"])],64)}}},me=fs(Zs,[["__scopeId","data-v-3bb3f74a"]]);export{me as default};
