import{u as O,p as b,D as U,b as d,h as l,k as a,x as o,v as m,F as q,f as s,o as i,d as f,e as h,O as k,t as x,y as D,P as L,ac as T,ae as R}from"./app-BArZ-JoB.js";import{u as j}from"./cancionesAdmin-DfvjdQrT.js";const H={class:"grid"},K={class:"col-12"},G={class:"card"},J={class:"badge bg-info"},Q={key:0},W={key:1,class:"text-muted"},X=["src"],Y={key:1,class:"pi pi-image text-gray-400",style:{"font-size":"1.5rem"}},Z={key:0,controls:"",class:"w-100",style:{height:"30px"}},P=["src"],ee={key:1,class:"text-muted"},le={__name:"Index",setup(te){const{canciones:I,getCanciones:y,deleteCancion:N}=j(),{can:v}=O(),c=b({global:{value:null,matchMode:T.CONTAINS}}),u=b(!1),_=b(null),g=b(null),w=()=>{c.value={global:{value:null,matchMode:T.CONTAINS}}},F=(p,e)=>{_.value=p,g.value=e,u.value=!0},B=()=>{N(_.value).then(()=>{u.value=!1,_.value=null,g.value=null}).catch(p=>{console.error("Error al eliminar la canción:",p)})};return U(()=>{y()}),(p,e)=>{const M=s("InputIcon"),V=s("InputText"),z=s("IconField"),r=s("Button"),A=s("Toolbar"),n=s("Column"),S=s("router-link"),$=s("DataTable"),E=s("Dialog"),C=R("tooltip");return i(),d(q,null,[e[11]||(e[11]=l("div",{class:"show"},null,-1)),l("div",H,[l("div",K,[l("div",G,[e[10]||(e[10]=l("div",{class:"card-header bg-transparent ps-0 pe-0"},[l("h5",{class:"float-start mb-0"},"Canciones")],-1)),a($,{filters:c.value,"onUpdate:filters":e[4]||(e[4]=t=>c.value=t),value:m(I).data,paginator:"",rows:5,globalFilterFields:["id","nombre","reproducciones","autor","duracion","created_at"],stripedRows:"",dataKey:"id",size:"small"},{header:o(()=>[a(A,{"pt:root:class":"toolbar-table"},{start:o(()=>[a(z,null,{default:o(()=>[a(M,{class:"pi pi-search"}),a(V,{modelValue:c.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value.global.value=t),placeholder:"Buscar"},null,8,["modelValue"])]),_:1}),a(r,{type:"button",icon:"pi pi-filter-slash",label:"Limpiar",class:"ml-1",outlined:"",onClick:e[1]||(e[1]=t=>w())}),a(r,{type:"button",icon:"pi pi-refresh",class:"h-100 ml-1",outlined:"",onClick:e[2]||(e[2]=t=>m(y)())})]),end:o(()=>[m(v)("cancion-create")?(i(),f(r,{key:0,icon:"pi pi-plus",label:"Crear Canción",onClick:e[3]||(e[3]=t=>p.$router.push("canciones/create")),class:"float-end"})):h("",!0)]),_:1})]),empty:o(()=>e[7]||(e[7]=[k("No se encontraron canciones.")])),default:o(()=>[a(n,{field:"id",header:"ID",sortable:""}),a(n,{field:"nombre",header:"Nombre",sortable:""}),a(n,{field:"autor",header:"Autor",sortable:""}),a(n,{field:"reproducciones",header:"Reproducciones",sortable:""},{body:o(t=>[l("span",J,x(t.data.reproducciones),1)]),_:1}),a(n,{field:"duracion",header:"Duración",sortable:""}),a(n,{field:"orden",header:"orden",sortable:""}),a(n,{field:"album_id",header:"Álbum",sortable:""},{body:o(t=>[t.data.album_id?(i(),d("span",Q,x(t.data.album_id),1)):(i(),d("span",W,"Sin álbum"))]),_:1}),a(n,{field:"created_at",header:"Creado el",sortable:""}),a(n,{field:"updated_at",header:"Actualizado el",sortable:""}),a(n,{header:"Portada"},{body:o(t=>[t.data.portada?(i(),d("img",{key:0,src:t.data.portada,alt:"Portada",style:{height:"40px",width:"40px","object-fit":"cover","border-radius":"4px"}},null,8,X)):(i(),d("span",Y))]),_:1}),a(n,{header:"Audio"},{body:o(t=>[t.data.archivo?(i(),d("audio",Z,[l("source",{src:t.data.archivo,type:"audio/mpeg"},null,8,P),e[8]||(e[8]=k(" Tu navegador no soporta audio HTML5. "))])):(i(),d("span",ee,"Sin archivo"))]),_:1}),a(n,{class:"pe-0 me-0 icon-column-3"},{body:o(t=>[m(v)("cancion-edit")?(i(),f(S,{key:0,to:{name:"canciones.edit",params:{id:t.data.id}}},{default:o(()=>[D(a(r,{icon:"pi pi-pencil",severity:"info",size:"small",class:"mr-1"},null,512),[[C,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"])):h("",!0),m(v)("cancion-delete")?D((i(),f(r,{key:1,icon:"pi pi-trash",severity:"danger",onClick:L(ae=>F(t.data.id,t.index),["prevent"]),size:"small"},null,8,["onClick"])),[[C,"Eliminar",void 0,{top:!0}]]):h("",!0)]),_:1})]),_:1},8,["filters","value"]),a(E,{visible:u.value,"onUpdate:visible":e[6]||(e[6]=t=>u.value=t),style:{width:"450px"},header:"Confirmar",modal:!0,appendTo:".show"},{footer:o(()=>[a(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=t=>u.value=!1)}),a(r,{label:"Sí",icon:"pi pi-check",class:"p-button-danger",onClick:B})]),default:o(()=>[e[9]||(e[9]=l("div",{class:"confirmation-content"},[l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),l("span",null,"¿Estás seguro de que quieres eliminar esta canción?")],-1))]),_:1},8,["visible"])])])])],64)}}};export{le as default};
