import{p as _,I as S,V as U,R as B,D as L,U as M,b as l,h as e,P as R,y as b,G as V,t as f,v as n,F as E,i as F,z as N,o}from"./app-BArZ-JoB.js";import{d as k,u as j,a as q,r as z,m as G}from"./rules-DZFuAMSf.js";function I(){const v=_({name:"",email:""});S();const d=_({}),r=_(!1),u=U("$swal");return{profile:v,getProfile:async()=>{v.value=auth.user.value},updateProfile:async m=>{r.value||(r.value=!0,d.value={},axios.put("/api/user",m).then(({data:a})=>{a.success&&(auth.user.value=a.data,u({icon:"success",title:"Profile updated successfully"}))}).catch(a=>{var c;(c=a.response)!=null&&c.data&&(d.value=a.response.data.errors)}).finally(()=>r.value=!1))},validationErrors:d,isLoading:r}}const T={class:"card border-0"},$={class:"card-body"},A={class:"mb-3"},C={class:"text-danger mt-1"},H={class:"text-danger mt-1"},J={class:"mb-3"},K={class:"text-danger mt-1"},O={class:"text-danger mt-1"},Q={class:"mb-3"},W=["disabled"],X={class:""},Y={key:0},Z={key:1},ae={__name:"index",setup(v){k("required",z),k("min",G);const d={name:"required|min:3",email:"required"},{validate:r,errors:u}=j({validationSchema:d}),{value:h}=q("name",null,{initialValue:""}),{value:g}=q("email",null,{initialValue:""}),{profile:m,getProfile:a,updateProfile:c,validationErrors:y,isLoading:p}=I(),t=B({name:h,email:g});function D(){r().then(P=>{P.valid&&c(t)})}return L(()=>{a()}),M(()=>{t.name=m.value.name,t.email=m.value.email}),(P,s)=>{var x,w;return o(),l("div",T,[s[4]||(s[4]=e("div",{class:"card-header bg-transparent"},[e("h5",{class:"float-start"},"Profile")],-1)),e("div",$,[e("form",{onSubmit:R(D,["prevent"])},[e("div",A,[s[2]||(s[2]=e("label",{for:"name",class:"form-label"},"Name",-1)),b(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>t.name=i),class:"form-control",id:"name"},null,512),[[V,t.name]]),e("div",C,f(n(u).name),1),e("div",H,[(o(!0),l(E,null,F((x=n(y))==null?void 0:x.name,i=>(o(),l("div",null,f(i),1))),256))])]),e("div",J,[s[3]||(s[3]=e("label",{for:"email",class:"form-label"},"Email",-1)),b(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=i=>t.email=i),class:"form-control",id:"email"},null,512),[[V,t.email]]),e("div",K,f(n(u).email),1),e("div",O,[(o(!0),l(E,null,F((w=n(y))==null?void 0:w.email,i=>(o(),l("div",null,f(i),1))),256))])]),e("div",Q,[e("button",{disabled:n(p),class:"btn btn-primary"},[b(e("div",X,null,512),[[N,n(p)]]),n(p)?(o(),l("span",Y,"Processing...")):(o(),l("span",Z,"Update"))],8,W)])],32)])])}}};export{ae as default};
