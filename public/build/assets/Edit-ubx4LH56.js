import{R as B,af as w,p as f,D as C,U as M,b as n,h as e,P as N,y as g,G as T,t as h,v as r,F as j,i as z,k as A,x as G,z as K,l as O,f as H,o as l,O as I}from"./app-BArZ-JoB.js";import{u as J}from"./roles-MIxV2xZW.js";import{d as k,u as Q,a as W,r as X,m as Y}from"./rules-DZFuAMSf.js";const Z={class:"row justify-content-center my-5"},$={class:"col"},ee={class:"card border-0 shadow-sm"},se={class:"card-body"},te={class:"mb-3"},ae={class:"form-outline w-25"},oe={class:"text-danger mt-1"},ie={class:"text-danger mt-1"},ne={class:"mt-4"},re=["disabled"],le={class:""},de={key:0},me={key:1},he={__name:"Edit",async setup(ce){let t,d;k("required",X),k("min",Y);const P={name:"required|min:3"},{validate:V,errors:R,resetForm:ue}=Q({validationSchema:P}),{value:F}=W("name",null,{initialValue:""}),{role:b,updateRolePermissions:D,getRole:L,updateRole:pe,validationErrors:E,isLoading:u}=J(),o=B({name:F}),x=O();let p=([t,d]=w(()=>axios.get("/api/permissions/")),t=await t,d(),t),S=p.data.data;p=([t,d]=w(()=>axios.get("/api/role-permissions/"+x.params.id)),t=await t,d(),t);let _=p.data.data,y=q(S,_);f(y),f(_);const v=f([y,_]);function U(){V().then(m=>{if(m.valid){let s=v.value[1].map(i=>i.id);D(o,s)}})}C(()=>{L(x.params.id)}),M(()=>{o.id=b.value.id,o.name=b.value.name});function q(m,s){return m.filter(i=>!s.some(c=>i.id===c.id))}return(m,s)=>{var c;const i=H("PickList");return l(),n("div",Z,[e("div",$,[e("div",ee,[e("div",se,[e("form",{onSubmit:N(U,["prevent"])},[e("div",te,[s[2]||(s[2]=e("label",{for:"post-title",class:"form-label"}," Title ",-1)),e("div",ae,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.name=a),id:"post-title",type:"text",class:"form-control"},null,512),[[T,o.name]])]),e("div",oe,h(r(R).name),1),e("div",ie,[(l(!0),n(j,null,z((c=r(E))==null?void 0:c.name,a=>(l(),n("div",null,h(a),1))),256))])]),A(i,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),dataKey:"id",breakpoint:"1400px",striped:"",pt:{root:{class:"picklist"}}},{option:G(({option:a})=>[I(h(a.name),1)]),_:1},8,["modelValue"]),e("div",ne,[e("button",{disabled:r(u),class:"btn btn-primary"},[g(e("div",le,null,512),[[K,r(u)]]),r(u)?(l(),n("span",de,"Processing...")):(l(),n("span",me,"Update"))],8,re)])],32)])])])])}}};export{he as default};
