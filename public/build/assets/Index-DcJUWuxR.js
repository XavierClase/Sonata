import{u as S,p as m,D as O,b as f,h as o,k as t,x as l,v as p,F as U,f as n,o as d,d as _,e as g,O as q,t as C,y as D,P as R,ac as x,ae as j}from"./app-BArZ-JoB.js";import{u as K}from"./listasAdmin-DBsvEFmU.js";const G={class:"grid"},H={class:"col-12"},J={class:"card"},P={class:"badge bg-info"},Q=["src"],W={key:1,class:"pi pi-image text-gray-400",style:{"font-size":"1.5rem"}},te={__name:"Index",setup(X){const{listas:I,getListas:y,deleteLista:T}=K(),{can:v}=S(),c=m({global:{value:null,matchMode:x.CONTAINS}}),u=m(!1),b=m(null),h=m(null),N=()=>{c.value={global:{value:null,matchMode:x.CONTAINS}}},w=(s,e)=>s?s.length>e?s.slice(0,e)+"...":s:"",F=(s,e)=>{b.value=s,h.value=e,u.value=!0},B=()=>{T(b.value).then(()=>{u.value=!1,b.value=null,h.value=null}).catch(s=>{console.error("Error al eliminar la lista:",s)})};return O(()=>{y()}),(s,e)=>{const L=n("InputIcon"),V=n("InputText"),z=n("IconField"),r=n("Button"),M=n("Toolbar"),i=n("Column"),$=n("router-link"),E=n("DataTable"),A=n("Dialog"),k=j("tooltip");return d(),f(U,null,[e[10]||(e[10]=o("div",{class:"show"},null,-1)),o("div",G,[o("div",H,[o("div",J,[e[9]||(e[9]=o("div",{class:"card-header bg-transparent ps-0 pe-0"},[o("h5",{class:"float-start mb-0"},"Listas de Reproducción")],-1)),t(E,{filters:c.value,"onUpdate:filters":e[4]||(e[4]=a=>c.value=a),value:p(I).data,paginator:"",rows:5,globalFilterFields:["id","nombre","descripcion","creador","created_at"],stripedRows:"",dataKey:"id",size:"small"},{header:l(()=>[t(M,{"pt:root:class":"toolbar-table"},{start:l(()=>[t(z,null,{default:l(()=>[t(L,{class:"pi pi-search"}),t(V,{modelValue:c.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"])]),_:1}),t(r,{type:"button",icon:"pi pi-filter-slash",label:"Limpiar",class:"ml-1",outlined:"",onClick:e[1]||(e[1]=a=>N())}),t(r,{type:"button",icon:"pi pi-refresh",class:"h-100 ml-1",outlined:"",onClick:e[2]||(e[2]=a=>p(y)())})]),end:l(()=>[p(v)("lista-create")?(d(),_(r,{key:0,icon:"pi pi-plus",label:"Crear Lista",onClick:e[3]||(e[3]=a=>s.$router.push("listas/create")),class:"float-end"})):g("",!0)]),_:1})]),empty:l(()=>e[7]||(e[7]=[q("No se encontraron listas de reproducción.")])),default:l(()=>[t(i,{field:"id",header:"ID",sortable:""}),t(i,{field:"nombre",header:"Nombre",sortable:""}),t(i,{field:"descripcion",header:"Descripción",sortable:""},{body:l(a=>[o("span",null,C(w(a.data.descripcion,50)),1)]),_:1}),t(i,{field:"creador",header:"Creador",sortable:""}),t(i,{field:"num_canciones",header:"Canciones",sortable:""},{body:l(a=>[o("span",P,C(a.data.num_canciones),1)]),_:1}),t(i,{field:"duracion_total",header:"Duración",sortable:""}),t(i,{field:"created_at",header:"Creado el",sortable:""}),t(i,{field:"updated_at",header:"Actualizado el",sortable:""}),t(i,{header:"Portada"},{body:l(a=>[a.data.portada?(d(),f("img",{key:0,src:a.data.portada,alt:"Portada",style:{height:"40px",width:"40px","object-fit":"cover","border-radius":"4px"}},null,8,Q)):(d(),f("span",W))]),_:1}),t(i,{class:"pe-0 me-0 icon-column-3"},{body:l(a=>[p(v)("lista-edit")?(d(),_($,{key:0,to:{name:"listas.edit",params:{id:a.data.id}}},{default:l(()=>[D(t(r,{icon:"pi pi-pencil",severity:"info",size:"small",class:"mr-1"},null,512),[[k,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"])):g("",!0),p(v)("lista-delete")?D((d(),_(r,{key:1,icon:"pi pi-trash",severity:"danger",onClick:R(Y=>F(a.data.id,a.index),["prevent"]),size:"small"},null,8,["onClick"])),[[k,"Eliminar",void 0,{top:!0}]]):g("",!0)]),_:1})]),_:1},8,["filters","value"]),t(A,{visible:u.value,"onUpdate:visible":e[6]||(e[6]=a=>u.value=a),style:{width:"450px"},header:"Confirmar",modal:!0,appendTo:".show"},{footer:l(()=>[t(r,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=a=>u.value=!1)}),t(r,{label:"Sí",icon:"pi pi-check",class:"p-button-danger",onClick:B})]),default:l(()=>[e[8]||(e[8]=o("div",{class:"confirmation-content"},[o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),o("span",null,"¿Estás seguro de que quieres eliminar esta lista de reproducción?")],-1))]),_:1},8,["visible"])])])])],64)}}};export{te as default};
