import{M as $,p as v,A as G,C as S,D as Y,b as m,h as e,v as o,t as l,n as H,e as J,F as g,i as C,k as p,x as f,l as q,f as i,o as r,d as x,J as K}from"./app-BArZ-JoB.js";import{d as O,u as Q}from"./datosUser-Ca7kkzz-.js";import{m as W}from"./mostrarMusica-BSXilRiR.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"perfil-artista-banner"},ee={class:"perfil-artista-banner-img"},se=["src"],ae={class:"perfil-artista-listas"},te={class:"row gap-4"},oe={class:"album-img"},le=["src"],ne={class:"album-detalles"},re={class:"perfil-artista-listas",id:"guardadas"},ie={class:"row gap-4"},ue={class:"album-img"},de=["src"],ce={class:"album-detalles"},me={class:"row"},pe={class:"config-imagenes col-md-6 mb-6"},fe={class:"imagen-config-perfil"},_e=["src"],ve={class:"col-md-6"},ge={class:"flex items-center gap-4 mb-3"},be={class:"flex justify-end gap-2"},he={__name:"perfilUsuario",setup(we){const b=$(),u=v(!1),h=G().user,_=v(!1),D=q(),d=v(D.params.id),{user:n,getUser:I}=O(d),{listas:L,getListasUser:M,listasGuardadas:F,getListasFavsUser:B}=W(d),{PreviewImagenPerfil:N,nombreUsuarioMod:c,manejarImagen:P,guardarCambios:V,fetchUserData:Ue}=Q(n,d,u),E=S(()=>h&&n.value&&parseInt(h.id)===parseInt(d.value));Y(async()=>{var t;try{await I(),await M(),await B(),c.value=(t=n.value)==null?void 0:t.name}catch(s){console.error("Error fetching user or albums:",s)}});const T=()=>{const t=window.location.href;navigator.clipboard.writeText(t).then(()=>{b.add({severity:"success",summary:"Enlace copiado",life:3e3})}).catch(s=>{b.add({severity:"error",summary:"Error al copiar",detail:s.message,life:3e3})})};function w(t){let s=t.portada;return new URL(s,import.meta.url).href}function U(t){let s=t==null?void 0:t.avatar;return new URL(s,import.meta.url).href}return(t,s)=>{var y;const k=i("router-link"),A=i("InputText"),R=i("FloatLabel"),j=i("Button"),z=i("Dialog");return r(),m(g,null,[s[10]||(s[10]=e("div",{class:"showDialog"},null,-1)),e("div",Z,[e("span",null,[e("div",ee,[e("img",{src:U(o(n))},null,8,se)]),e("h1",null,l((y=o(n))==null?void 0:y.name),1)]),E.value?(r(),m("i",{key:0,class:H({"pi pi-cog":!0,"pi-spin":_.value}),style:{"font-size":"2rem"},onMouseover:s[0]||(s[0]=a=>_.value=!0),onMouseleave:s[1]||(s[1]=a=>_.value=!1),onClick:s[2]||(s[2]=a=>u.value=!0)},null,34)):J("",!0)]),e("i",{class:"pi pi-share-alt",onClick:T}),e("div",ae,[s[6]||(s[6]=e("h2",null,"Listas Creadas",-1)),e("div",te,[(r(!0),m(g,null,C(o(L),a=>(r(),x(k,{class:"album col-md-2",key:a.id,to:{name:"app.lista",params:{id:a.id}}},{default:f(()=>[e("div",oe,[e("img",{src:w(a)},null,8,le)]),e("div",ne,[e("h4",null,l(a.nombre),1),e("p",null,"Año: "+l(new Date(a.created_at).getFullYear()),1),e("p",null,"Duración: "+l(a.duracion_total),1),e("p",null,"Número de canciones: "+l(a.num_canciones),1)])]),_:2},1032,["to"]))),128))])]),e("div",re,[s[7]||(s[7]=e("h2",null,"Listas guardadas",-1)),e("div",ie,[(r(!0),m(g,null,C(o(F),a=>(r(),x(k,{class:"album col-md-2",key:a.id,to:{name:"app.lista",params:{id:a.id}}},{default:f(()=>[e("div",ue,[e("img",{src:w(a)},null,8,de)]),e("div",ce,[e("h4",null,l(a.nombre),1),e("p",null,"Año: "+l(new Date(a.created_at).getFullYear()),1),e("p",null,"Duración: "+l(a.duracion_total),1),e("p",null,"Número de canciones: "+l(a.num_canciones),1)])]),_:2},1032,["to"]))),128))])]),p(z,{class:"banner-config-modal",visible:u.value,"onUpdate:visible":s[5]||(s[5]=a=>u.value=a),modal:"",header:"Modificar Perfil",appendTo:".showDialog"},{default:f(()=>[s[9]||(s[9]=e("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Actualiza tu información.",-1)),e("div",me,[e("div",pe,[e("div",fe,[e("img",{src:o(N)||U(o(n))||"/images/placeholder1.jpg",class:"estilo_imagen"},null,8,_e),e("input",{type:"file",onChange:s[3]||(s[3]=a=>o(P)(a,"perfil")),accept:"image/*",ref:"archivoImagen",class:"añadir_archivo"},null,544)])]),e("div",ve,[e("div",ge,[p(R,{variant:"on"},{default:f(()=>[p(A,{class:"banner-config-input",id:"username",modelValue:o(c),"onUpdate:modelValue":s[4]||(s[4]=a=>K(c)?c.value=a:null)},null,8,["modelValue"]),s[8]||(s[8]=e("label",{for:"username"},"Nombre de Usuario",-1))]),_:1})])])]),e("div",be,[p(j,{type:"button",label:"Guardar",onClick:o(V)},null,8,["onClick"])])]),_:1},8,["visible"])],64)}}},De=X(he,[["__scopeId","data-v-369e1001"]]);export{De as default};
