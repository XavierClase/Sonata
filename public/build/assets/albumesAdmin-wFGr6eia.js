import{p as d,M as c,H as l}from"./app-BArZ-JoB.js";function w(){const n=d({data:[]}),u=d({}),o=d({}),e=d(!1),s=c(),m=async()=>{e.value=!0;try{const r=await l.get("/api/admin/albumes");n.value=r.data,e.value=!1}catch{e.value=!1,s.add({severity:"error",summary:"Error",detail:"Error al cargar los álbumes",life:3e3})}};return{albumes:n,album:u,errors:o,loading:e,getAlbumes:m,getAlbum:async r=>{e.value=!0;try{const t=await l.get(`/api/admin/albumes/${r}`);return u.value=t.data.data,e.value=!1,u.value}catch{e.value=!1,s.add({severity:"error",summary:"Error",detail:"Error al cargar los detalles del álbum",life:3e3})}},storeAlbum:async r=>{e.value=!0,o.value={};const t=new FormData;for(const a in r)a==="portada"&&r[a]instanceof File,t.append(a,r[a]);try{const a=await l.post("/api/admin/albumes",t,{headers:{"Content-Type":"multipart/form-data"}});return u.value=a.data.album,e.value=!1,s.add({severity:"success",summary:"Éxito",detail:"Álbum creado correctamente",life:3e3}),a}catch(a){throw a.response&&a.response.status===422&&(o.value=a.response.data.errors),e.value=!1,s.add({severity:"error",summary:"Error",detail:"Error al crear el álbum",life:3e3}),a}},updateAlbum:async(r,t)=>{e.value=!0,o.value={};try{const a=await l.put(`/api/admin/albumes/${r}`,t);return u.value=a.data.data,e.value=!1,s.add({severity:"success",summary:"Éxito",detail:"Álbum actualizado correctamente",life:3e3}),a}catch(a){throw a.response&&a.response.status===422&&(o.value=a.response.data.errors),e.value=!1,s.add({severity:"error",summary:"Error",detail:"Error al actualizar el álbum",life:3e3}),a}},deleteAlbum:async r=>{e.value=!0;try{await l.delete(`/api/admin/albumes/${r}`),m(),e.value=!1,s.add({severity:"success",summary:"Éxito",detail:"Álbum eliminado correctamente",life:3e3})}catch(t){throw e.value=!1,s.add({severity:"error",summary:"Error",detail:"Error al eliminar el álbum",life:3e3}),t}},updatePortada:async(r,t)=>{e.value=!0;const a=new FormData;a.append("id",r),a.append("portada",t);try{const i=await l.post("/api/admin/albumes/update-portada",a,{headers:{"Content-Type":"multipart/form-data"}});return e.value=!1,s.add({severity:"success",summary:"Éxito",detail:"Portada actualizada correctamente",life:3e3}),i.data}catch(i){throw e.value=!1,s.add({severity:"error",summary:"Error",detail:"Error al actualizar la portada",life:3e3}),i}}}}export{w as u};
