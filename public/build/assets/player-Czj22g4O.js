import{c as I,a1 as G,H as E}from"./app-BArZ-JoB.js";var H={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var F;function V(){return F||(F=1,function(v){(function(){var g=function(){this.init()};g.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator=typeof window<"u"&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var n=this||o;if(t=parseFloat(t),n.ctx||T(),typeof t<"u"&&t>=0&&t<=1){if(n._volume=t,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var i=n._howls[r]._getSoundIds(),l=0;l<i.length;l++){var _=n._howls[r]._soundById(i[l]);_&&_._node&&(_._node.volume=_._volume*t)}return n}return n._volume},mute:function(t){var n=this||o;n.ctx||T(),n._muted=t,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(t?0:n._volume,o.ctx.currentTime);for(var r=0;r<n._howls.length;r++)if(!n._howls[r]._webAudio)for(var i=n._howls[r]._getSoundIds(),l=0;l<i.length;l++){var _=n._howls[r]._soundById(i[l]);_&&_._node&&(_._node.muted=t?!0:_._muted)}return n},stop:function(){for(var t=this||o,n=0;n<t._howls.length;n++)t._howls[n].stop();return t},unload:function(){for(var t=this||o,n=t._howls.length-1;n>=0;n--)t._howls[n].unload();return t.usingWebAudio&&t.ctx&&typeof t.ctx.close<"u"&&(t.ctx.close(),t.ctx=null,T()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(t._canPlayEvent="canplay")}catch{t.noAudio=!0}else t.noAudio=!0;try{var n=new Audio;n.muted&&(t.noAudio=!0)}catch{}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return t}if(!n||typeof n.canPlayType!="function")return t;var r=n.canPlayType("audio/mpeg;").replace(/^no$/,""),i=t._navigator?t._navigator.userAgent:"",l=i.match(/OPR\/(\d+)/g),_=l&&parseInt(l[0].split("/")[1],10)<33,a=i.indexOf("Safari")!==-1&&i.indexOf("Chrome")===-1,d=i.match(/Version\/(.*?) /),h=a&&d&&parseInt(d[1],10)<15;return t._codecs={mp3:!!(!_&&(r||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!h&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!h&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!(t._audioUnlocked||!t.ctx)){t._audioUnlocked=!1,t.autoUnlock=!1,!t._mobileUnloaded&&t.ctx.sampleRate!==44100&&(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var n=function(r){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var i=new Audio;i._unlocked=!0,t._releaseHtml5Audio(i)}catch{t.noAudio=!0;break}for(var l=0;l<t._howls.length;l++)if(!t._howls[l]._webAudio)for(var _=t._howls[l]._getSoundIds(),a=0;a<_.length;a++){var d=t._howls[l]._soundById(_[a]);d&&d._node&&!d._node._unlocked&&(d._node._unlocked=!0,d._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),typeof h.start>"u"?h.noteOn(0):h.start(0),typeof t.ctx.resume=="function"&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var w=0;w<t._howls.length;w++)t._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var n=this||o;return t._unlocked&&n._html5AudioPool.push(t),n},_autoSuspend:function(){var t=this;if(!(!t.autoSuspend||!t.ctx||typeof t.ctx.suspend>"u"||!o.usingWebAudio)){for(var n=0;n<t._howls.length;n++)if(t._howls[n]._webAudio){for(var r=0;r<t._howls[n]._sounds.length;r++)if(!t._howls[n]._sounds[r]._paused)return t}return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var i=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(i,i)}},3e4),t}},_autoResume:function(){var t=this;if(!(!t.ctx||typeof t.ctx.resume>"u"||!o.usingWebAudio))return t.state==="running"&&t.ctx.state!=="interrupted"&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):t.state==="suspended"||t.state==="running"&&t.ctx.state==="interrupted"?(t.ctx.resume().then(function(){t.state="running";for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("resume")}),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):t.state==="suspending"&&(t._resumeAfterSuspend=!0),t}};var o=new g,u=function(t){var n=this;if(!t.src||t.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(t)};u.prototype={init:function(t){var n=this;return o.ctx||T(),n._autoplay=t.autoplay||!1,n._format=typeof t.format!="string"?t.format:[t.format],n._html5=t.html5||!1,n._muted=t.mute||!1,n._loop=t.loop||!1,n._pool=t.pool||5,n._preload=typeof t.preload=="boolean"||t.preload==="metadata"?t.preload:!0,n._rate=t.rate||1,n._sprite=t.sprite||{},n._src=typeof t.src!="string"?t.src:[t.src],n._volume=t.volume!==void 0?t.volume:1,n._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:t.xhr&&t.xhr.withCredentials?t.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=t.onend?[{fn:t.onend}]:[],n._onfade=t.onfade?[{fn:t.onfade}]:[],n._onload=t.onload?[{fn:t.onload}]:[],n._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],n._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],n._onpause=t.onpause?[{fn:t.onpause}]:[],n._onplay=t.onplay?[{fn:t.onplay}]:[],n._onstop=t.onstop?[{fn:t.onstop}]:[],n._onmute=t.onmute?[{fn:t.onmute}]:[],n._onvolume=t.onvolume?[{fn:t.onvolume}]:[],n._onrate=t.onrate?[{fn:t.onrate}]:[],n._onseek=t.onseek?[{fn:t.onseek}]:[],n._onunlock=t.onunlock?[{fn:t.onunlock}]:[],n._onresume=[],n._webAudio=o.usingWebAudio&&!n._html5,typeof o.ctx<"u"&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var t=this,n=null;if(o.noAudio){t._emit("loaderror",null,"No audio support.");return}typeof t._src=="string"&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var i,l;if(t._format&&t._format[r])i=t._format[r];else{if(l=t._src[r],typeof l!="string"){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=/^data:audio\/([^;,]+);/i.exec(l),i||(i=/\.([^.]+)$/.exec(l.split("?",1)[0])),i&&(i=i[1].toLowerCase())}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&o.codecs(i)){n=t._src[r];break}}if(!n){t._emit("loaderror",null,"No codec support for selected audio sources.");return}return t._src=n,t._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(t._html5=!0,t._webAudio=!1),new s(t),t._webAudio&&c(t),t},play:function(t,n){var r=this,i=null;if(typeof t=="number")i=t,t=null;else{if(typeof t=="string"&&r._state==="loaded"&&!r._sprite[t])return null;if(typeof t>"u"&&(t="__default",!r._playLock)){for(var l=0,_=0;_<r._sounds.length;_++)r._sounds[_]._paused&&!r._sounds[_]._ended&&(l++,i=r._sounds[_]._id);l===1?t=null:i=null}}var a=i?r._soundById(i):r._inactiveSound();if(!a)return null;if(i&&!t&&(t=a._sprite||"__default"),r._state!=="loaded"){a._sprite=t,a._ended=!1;var d=a._id;return r._queue.push({event:"play",action:function(){r.play(d)}}),d}if(i&&!a._paused)return n||r._loadQueue("play"),a._id;r._webAudio&&o._autoResume();var h=Math.max(0,a._seek>0?a._seek:r._sprite[t][0]/1e3),w=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-h),b=w*1e3/Math.abs(a._rate),x=r._sprite[t][0]/1e3,k=(r._sprite[t][0]+r._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var P=function(){a._paused=!1,a._seek=h,a._start=x,a._stop=k,a._loop=!!(a._loop||r._sprite[t][2])};if(h>=k){r._ended(a);return}var y=a._node;if(r._webAudio){var L=function(){r._playLock=!1,P(),r._refreshBuffer(a);var S=a._muted||r._muted?0:a._volume;y.gain.setValueAtTime(S,o.ctx.currentTime),a._playStart=o.ctx.currentTime,typeof y.bufferSource.start>"u"?a._loop?y.bufferSource.noteGrainOn(0,h,86400):y.bufferSource.noteGrainOn(0,h,w):a._loop?y.bufferSource.start(0,h,86400):y.bufferSource.start(0,h,w),b!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),b)),n||setTimeout(function(){r._emit("play",a._id),r._loadQueue()},0)};o.state==="running"&&o.ctx.state!=="interrupted"?L():(r._playLock=!0,r.once("resume",L),r._clearTimer(a._id))}else{var O=function(){y.currentTime=h,y.muted=a._muted||r._muted||o._muted||y.muted,y.volume=a._volume*o.volume(),y.playbackRate=a._rate;try{var S=y.play();if(S&&typeof Promise<"u"&&(S instanceof Promise||typeof S.then=="function")?(r._playLock=!0,P(),S.then(function(){r._playLock=!1,y._unlocked=!0,n?r._loadQueue():r._emit("play",a._id)}).catch(function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(r._playLock=!1,P(),r._emit("play",a._id)),y.playbackRate=a._rate,y.paused){r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}t!=="__default"||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),b):(r._endTimers[a._id]=function(){r._ended(a),y.removeEventListener("ended",r._endTimers[a._id],!1)},y.addEventListener("ended",r._endTimers[a._id],!1))}catch(D){r._emit("playerror",a._id,D)}};y.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(y.src=r._src,y.load());var B=window&&window.ejecta||!y.readyState&&o._navigator.isCocoonJS;if(y.readyState>=3||B)O();else{r._playLock=!0,r._state="loading";var M=function(){r._state="loaded",O(),y.removeEventListener(o._canPlayEvent,M,!1)};y.addEventListener(o._canPlayEvent,M,!1),r._clearTimer(a._id)}}return a._id},pause:function(t){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var l=n._soundById(r[i]);if(l&&!l._paused&&(l._seek=n.seek(r[i]),l._rateSeek=0,l._paused=!0,n._stopFade(r[i]),l._node))if(n._webAudio){if(!l._node.bufferSource)continue;typeof l._node.bufferSource.stop>"u"?l._node.bufferSource.noteOff(0):l._node.bufferSource.stop(0),n._cleanBuffer(l._node)}else(!isNaN(l._node.duration)||l._node.duration===1/0)&&l._node.pause();arguments[1]||n._emit("pause",l?l._id:null)}return n},stop:function(t,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(t)}}),r;for(var i=r._getSoundIds(t),l=0;l<i.length;l++){r._clearTimer(i[l]);var _=r._soundById(i[l]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,r._stopFade(i[l]),_._node&&(r._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),r._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&r._clearSound(_._node))),n||r._emit("stop",_._id))}return r},mute:function(t,n){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(t,n)}}),r;if(typeof n>"u")if(typeof t=="boolean")r._muted=t;else return r._muted;for(var i=r._getSoundIds(n),l=0;l<i.length;l++){var _=r._soundById(i[l]);_&&(_._muted=t,_._interval&&r._stopFade(_._id),r._webAudio&&_._node?_._node.gain.setValueAtTime(t?0:_._volume,o.ctx.currentTime):_._node&&(_._node.muted=o._muted?!0:t),r._emit("mute",_._id))}return r},volume:function(){var t=this,n=arguments,r,i;if(n.length===0)return t._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var l=t._getSoundIds(),_=l.indexOf(n[0]);_>=0?i=parseInt(n[0],10):r=parseFloat(n[0])}else n.length>=2&&(r=parseFloat(n[0]),i=parseInt(n[1],10));var a;if(typeof r<"u"&&r>=0&&r<=1){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,n)}}),t;typeof i>"u"&&(t._volume=r),i=t._getSoundIds(i);for(var d=0;d<i.length;d++)a=t._soundById(i[d]),a&&(a._volume=r,n[2]||t._stopFade(i[d]),t._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(r,o.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=r*o.volume()),t._emit("volume",a._id))}else return a=i?t._soundById(i):t._sounds[0],a?a._volume:0;return t},fade:function(t,n,r,i){var l=this;if(l._state!=="loaded"||l._playLock)return l._queue.push({event:"fade",action:function(){l.fade(t,n,r,i)}}),l;t=Math.min(Math.max(0,parseFloat(t)),1),n=Math.min(Math.max(0,parseFloat(n)),1),r=parseFloat(r),l.volume(t,i);for(var _=l._getSoundIds(i),a=0;a<_.length;a++){var d=l._soundById(_[a]);if(d){if(i||l._stopFade(_[a]),l._webAudio&&!d._muted){var h=o.ctx.currentTime,w=h+r/1e3;d._volume=t,d._node.gain.setValueAtTime(t,h),d._node.gain.linearRampToValueAtTime(n,w)}l._startFadeInterval(d,t,n,r,_[a],typeof i>"u")}}return l},_startFadeInterval:function(t,n,r,i,l,_){var a=this,d=n,h=r-n,w=Math.abs(h/.01),b=Math.max(4,w>0?i/w:i),x=Date.now();t._fadeTo=r,t._interval=setInterval(function(){var k=(Date.now()-x)/i;x=Date.now(),d+=h*k,d=Math.round(d*100)/100,h<0?d=Math.max(r,d):d=Math.min(r,d),a._webAudio?t._volume=d:a.volume(d,t._id,!0),_&&(a._volume=d),(r<n&&d<=r||r>n&&d>=r)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(r,t._id),a._emit("fade",t._id))},b)},_stopFade:function(t){var n=this,r=n._soundById(t);return r&&r._interval&&(n._webAudio&&r._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(r._interval),r._interval=null,n.volume(r._fadeTo,t),r._fadeTo=null,n._emit("fade",t)),n},loop:function(){var t=this,n=arguments,r,i,l;if(n.length===0)return t._loop;if(n.length===1)if(typeof n[0]=="boolean")r=n[0],t._loop=r;else return l=t._soundById(parseInt(n[0],10)),l?l._loop:!1;else n.length===2&&(r=n[0],i=parseInt(n[1],10));for(var _=t._getSoundIds(i),a=0;a<_.length;a++)l=t._soundById(_[a]),l&&(l._loop=r,t._webAudio&&l._node&&l._node.bufferSource&&(l._node.bufferSource.loop=r,r&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop,t.playing(_[a])&&(t.pause(_[a],!0),t.play(_[a],!0)))));return t},rate:function(){var t=this,n=arguments,r,i;if(n.length===0)i=t._sounds[0]._id;else if(n.length===1){var l=t._getSoundIds(),_=l.indexOf(n[0]);_>=0?i=parseInt(n[0],10):r=parseFloat(n[0])}else n.length===2&&(r=parseFloat(n[0]),i=parseInt(n[1],10));var a;if(typeof r=="number"){if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,n)}}),t;typeof i>"u"&&(t._rate=r),i=t._getSoundIds(i);for(var d=0;d<i.length;d++)if(a=t._soundById(i[d]),a){t.playing(i[d])&&(a._rateSeek=t.seek(i[d]),a._playStart=t._webAudio?o.ctx.currentTime:a._playStart),a._rate=r,t._webAudio&&a._node&&a._node.bufferSource?a._node.bufferSource.playbackRate.setValueAtTime(r,o.ctx.currentTime):a._node&&(a._node.playbackRate=r);var h=t.seek(i[d]),w=(t._sprite[a._sprite][0]+t._sprite[a._sprite][1])/1e3-h,b=w*1e3/Math.abs(a._rate);(t._endTimers[i[d]]||!a._paused)&&(t._clearTimer(i[d]),t._endTimers[i[d]]=setTimeout(t._ended.bind(t,a),b)),t._emit("rate",a._id)}}else return a=t._soundById(i),a?a._rate:t._rate;return t},seek:function(){var t=this,n=arguments,r,i;if(n.length===0)t._sounds.length&&(i=t._sounds[0]._id);else if(n.length===1){var l=t._getSoundIds(),_=l.indexOf(n[0]);_>=0?i=parseInt(n[0],10):t._sounds.length&&(i=t._sounds[0]._id,r=parseFloat(n[0]))}else n.length===2&&(r=parseFloat(n[0]),i=parseInt(n[1],10));if(typeof i>"u")return 0;if(typeof r=="number"&&(t._state!=="loaded"||t._playLock))return t._queue.push({event:"seek",action:function(){t.seek.apply(t,n)}}),t;var a=t._soundById(i);if(a)if(typeof r=="number"&&r>=0){var d=t.playing(i);d&&t.pause(i,!0),a._seek=r,a._ended=!1,t._clearTimer(i),!t._webAudio&&a._node&&!isNaN(a._node.duration)&&(a._node.currentTime=r);var h=function(){d&&t.play(i,!0),t._emit("seek",i)};if(d&&!t._webAudio){var w=function(){t._playLock?setTimeout(w,0):h()};setTimeout(w,0)}else h()}else if(t._webAudio){var b=t.playing(i)?o.ctx.currentTime-a._playStart:0,x=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(x+b*Math.abs(a._rate))}else return a._node.currentTime;return t},playing:function(t){var n=this;if(typeof t=="number"){var r=n._soundById(t);return r?!r._paused:!1}for(var i=0;i<n._sounds.length;i++)if(!n._sounds[i]._paused)return!0;return!1},duration:function(t){var n=this,r=n._duration,i=n._soundById(t);return i&&(r=n._sprite[i._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var t=this,n=t._sounds,r=0;r<n.length;r++)n[r]._paused||t.stop(n[r]._id),t._webAudio||(t._clearSound(n[r]._node),n[r]._node.removeEventListener("error",n[r]._errorFn,!1),n[r]._node.removeEventListener(o._canPlayEvent,n[r]._loadFn,!1),n[r]._node.removeEventListener("ended",n[r]._endFn,!1),o._releaseHtml5Audio(n[r]._node)),delete n[r]._node,t._clearTimer(n[r]._id);var i=o._howls.indexOf(t);i>=0&&o._howls.splice(i,1);var l=!0;for(r=0;r<o._howls.length;r++)if(o._howls[r]._src===t._src||t._src.indexOf(o._howls[r]._src)>=0){l=!1;break}return l&&delete p[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,n,r,i){var l=this,_=l["_on"+t];return typeof n=="function"&&_.push(i?{id:r,fn:n,once:i}:{id:r,fn:n}),l},off:function(t,n,r){var i=this,l=i["_on"+t],_=0;if(typeof n=="number"&&(r=n,n=null),n||r)for(_=0;_<l.length;_++){var a=r===l[_].id;if(n===l[_].fn&&a||!n&&a){l.splice(_,1);break}}else if(t)i["_on"+t]=[];else{var d=Object.keys(i);for(_=0;_<d.length;_++)d[_].indexOf("_on")===0&&Array.isArray(i[d[_]])&&(i[d[_]]=[])}return i},once:function(t,n,r){var i=this;return i.on(t,n,r,1),i},_emit:function(t,n,r){for(var i=this,l=i["_on"+t],_=l.length-1;_>=0;_--)(!l[_].id||l[_].id===n||t==="load")&&(setTimeout((function(a){a.call(this,n,r)}).bind(i,l[_].fn),0),l[_].once&&i.off(t,l[_].fn,l[_].id));return i._loadQueue(t),i},_loadQueue:function(t){var n=this;if(n._queue.length>0){var r=n._queue[0];r.event===t&&(n._queue.shift(),n._loadQueue()),t||r.action()}return n},_ended:function(t){var n=this,r=t._sprite;if(!n._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(n._ended.bind(n,t),100),n;var i=!!(t._loop||n._sprite[r][2]);if(n._emit("end",t._id),!n._webAudio&&i&&n.stop(t._id,!0).play(t._id),n._webAudio&&i){n._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var l=(t._stop-t._start)*1e3/Math.abs(t._rate);n._endTimers[t._id]=setTimeout(n._ended.bind(n,t),l)}return n._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,n._clearTimer(t._id),n._cleanBuffer(t._node),o._autoSuspend()),!n._webAudio&&!i&&n.stop(t._id,!0),n},_clearTimer:function(t){var n=this;if(n._endTimers[t]){if(typeof n._endTimers[t]!="function")clearTimeout(n._endTimers[t]);else{var r=n._soundById(t);r&&r._node&&r._node.removeEventListener("ended",n._endTimers[t],!1)}delete n._endTimers[t]}return n},_soundById:function(t){for(var n=this,r=0;r<n._sounds.length;r++)if(t===n._sounds[r]._id)return n._sounds[r];return null},_inactiveSound:function(){var t=this;t._drain();for(var n=0;n<t._sounds.length;n++)if(t._sounds[n]._ended)return t._sounds[n].reset();return new s(t)},_drain:function(){var t=this,n=t._pool,r=0,i=0;if(!(t._sounds.length<n)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&r++;for(i=t._sounds.length-1;i>=0;i--){if(r<=n)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),r--)}}},_getSoundIds:function(t){var n=this;if(typeof t>"u"){for(var r=[],i=0;i<n._sounds.length;i++)r.push(n._sounds[i]._id);return r}else return[t]},_refreshBuffer:function(t){var n=this;return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=p[n._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),n},_cleanBuffer:function(t){var n=this,r=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!t.bufferSource)return n;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),r))try{t.bufferSource.buffer=o._scratchBuffer}catch{}return t.bufferSource=null,n},_clearSound:function(t){var n=/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent);n||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this,n=t._parent;return t._muted=n._muted,t._loop=n._loop,t._volume=n._volume,t._rate=n._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,n._sounds.push(t),t.create(),t},create:function(){var t=this,n=t._parent,r=o._muted||t._muted||t._parent._muted?0:t._volume;return n._webAudio?(t._node=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),t._node.gain.setValueAtTime(r,o.ctx.currentTime),t._node.paused=!0,t._node.connect(o.masterGain)):o.noAudio||(t._node=o._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(o._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=n._src,t._node.preload=n._preload===!0?"auto":n._preload,t._node.volume=r*o.volume(),t._node.load()),t},reset:function(){var t=this,n=t._parent;return t._muted=n._muted,t._loop=n._loop,t._volume=n._volume,t._rate=n._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,n=t._parent;n._duration=Math.ceil(t._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),t._node.removeEventListener(o._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,n=t._parent;n._duration===1/0&&(n._duration=Math.ceil(t._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var p={},c=function(t){var n=t._src;if(p[n]){t._duration=p[n].duration,f(t);return}if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),i=new Uint8Array(r.length),l=0;l<r.length;++l)i[l]=r.charCodeAt(l);m(i.buffer,t)}else{var _=new XMLHttpRequest;_.open(t._xhr.method,n,!0),_.withCredentials=t._xhr.withCredentials,_.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(a){_.setRequestHeader(a,t._xhr.headers[a])}),_.onload=function(){var a=(_.status+"")[0];if(a!=="0"&&a!=="2"&&a!=="3"){t._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}m(_.response,t)},_.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete p[n],t.load())},A(_)}},A=function(t){try{t.send()}catch{t.onerror()}},m=function(t,n){var r=function(){n._emit("loaderror",null,"Decoding audio data failed.")},i=function(l){l&&n._sounds.length>0?(p[n._src]=l,f(n,l)):r()};typeof Promise<"u"&&o.ctx.decodeAudioData.length===1?o.ctx.decodeAudioData(t).then(i).catch(r):o.ctx.decodeAudioData(t,i,r)},f=function(t,n){n&&!t._duration&&(t._duration=n.duration),Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue())},T=function(){if(o.usingWebAudio){try{typeof AudioContext<"u"?o.ctx=new AudioContext:typeof webkitAudioContext<"u"?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch{o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),n=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=n?parseInt(n[1],10):null;if(t&&r&&r<9){var i=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!i&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};v.Howler=o,v.Howl=u,typeof I<"u"?(I.HowlerGlobal=g,I.Howler=o,I.Howl=u,I.Sound=s):typeof window<"u"&&(window.HowlerGlobal=g,window.Howler=o,window.Howl=u,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(o){var u=this;if(!u.ctx||!u.ctx.listener)return u;for(var s=u._howls.length-1;s>=0;s--)u._howls[s].stereo(o);return u},HowlerGlobal.prototype.pos=function(o,u,s){var p=this;if(!p.ctx||!p.ctx.listener)return p;if(u=typeof u!="number"?p._pos[1]:u,s=typeof s!="number"?p._pos[2]:s,typeof o=="number")p._pos=[o,u,s],typeof p.ctx.listener.positionX<"u"?(p.ctx.listener.positionX.setTargetAtTime(p._pos[0],Howler.ctx.currentTime,.1),p.ctx.listener.positionY.setTargetAtTime(p._pos[1],Howler.ctx.currentTime,.1),p.ctx.listener.positionZ.setTargetAtTime(p._pos[2],Howler.ctx.currentTime,.1)):p.ctx.listener.setPosition(p._pos[0],p._pos[1],p._pos[2]);else return p._pos;return p},HowlerGlobal.prototype.orientation=function(o,u,s,p,c,A){var m=this;if(!m.ctx||!m.ctx.listener)return m;var f=m._orientation;if(u=typeof u!="number"?f[1]:u,s=typeof s!="number"?f[2]:s,p=typeof p!="number"?f[3]:p,c=typeof c!="number"?f[4]:c,A=typeof A!="number"?f[5]:A,typeof o=="number")m._orientation=[o,u,s,p,c,A],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(o,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(u,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(p,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(A,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(o,u,s,p,c,A);else return f;return m},Howl.prototype.init=function(o){return function(u){var s=this;return s._orientation=u.orientation||[1,0,0],s._stereo=u.stereo||null,s._pos=u.pos||null,s._pannerAttr={coneInnerAngle:typeof u.coneInnerAngle<"u"?u.coneInnerAngle:360,coneOuterAngle:typeof u.coneOuterAngle<"u"?u.coneOuterAngle:360,coneOuterGain:typeof u.coneOuterGain<"u"?u.coneOuterGain:0,distanceModel:typeof u.distanceModel<"u"?u.distanceModel:"inverse",maxDistance:typeof u.maxDistance<"u"?u.maxDistance:1e4,panningModel:typeof u.panningModel<"u"?u.panningModel:"HRTF",refDistance:typeof u.refDistance<"u"?u.refDistance:1,rolloffFactor:typeof u.rolloffFactor<"u"?u.rolloffFactor:1},s._onstereo=u.onstereo?[{fn:u.onstereo}]:[],s._onpos=u.onpos?[{fn:u.onpos}]:[],s._onorientation=u.onorientation?[{fn:u.onorientation}]:[],o.call(this,u)}}(Howl.prototype.init),Howl.prototype.stereo=function(o,u){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(o,u)}}),s;var p=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof u>"u")if(typeof o=="number")s._stereo=o,s._pos=[o,0,0];else return s._stereo;for(var c=s._getSoundIds(u),A=0;A<c.length;A++){var m=s._soundById(c[A]);if(m)if(typeof o=="number")m._stereo=o,m._pos=[o,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&g(m,p),p==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(o,0,0):m._panner.pan.setValueAtTime(o,Howler.ctx.currentTime)),s._emit("stereo",m._id);else return m._stereo}return s},Howl.prototype.pos=function(o,u,s,p){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(o,u,s,p)}}),c;if(u=typeof u!="number"?0:u,s=typeof s!="number"?-.5:s,typeof p>"u")if(typeof o=="number")c._pos=[o,u,s];else return c._pos;for(var A=c._getSoundIds(p),m=0;m<A.length;m++){var f=c._soundById(A[m]);if(f)if(typeof o=="number")f._pos=[o,u,s],f._node&&((!f._panner||f._panner.pan)&&g(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(u,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):f._panner.setPosition(o,u,s)),c._emit("pos",f._id);else return f._pos}return c},Howl.prototype.orientation=function(o,u,s,p){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(o,u,s,p)}}),c;if(u=typeof u!="number"?c._orientation[1]:u,s=typeof s!="number"?c._orientation[2]:s,typeof p>"u")if(typeof o=="number")c._orientation=[o,u,s];else return c._orientation;for(var A=c._getSoundIds(p),m=0;m<A.length;m++){var f=c._soundById(A[m]);if(f)if(typeof o=="number")f._orientation=[o,u,s],f._node&&(f._panner||(f._pos||(f._pos=c._pos||[0,0,-.5]),g(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(o,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(u,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):f._panner.setOrientation(o,u,s)),c._emit("orientation",f._id);else return f._orientation}return c},Howl.prototype.pannerAttr=function(){var o=this,u=arguments,s,p,c;if(!o._webAudio)return o;if(u.length===0)return o._pannerAttr;if(u.length===1)if(typeof u[0]=="object")s=u[0],typeof p>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),o._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:o._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:o._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:o._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:o._panningModel});else return c=o._soundById(parseInt(u[0],10)),c?c._pannerAttr:o._pannerAttr;else u.length===2&&(s=u[0],p=parseInt(u[1],10));for(var A=o._getSoundIds(p),m=0;m<A.length;m++)if(c=o._soundById(A[m]),c){var f=c._pannerAttr;f={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:f.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:f.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:f.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:f.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:f.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:f.panningModel};var T=c._panner;T||(c._pos||(c._pos=o._pos||[0,0,-.5]),g(c,"spatial"),T=c._panner),T.coneInnerAngle=f.coneInnerAngle,T.coneOuterAngle=f.coneOuterAngle,T.coneOuterGain=f.coneOuterGain,T.distanceModel=f.distanceModel,T.maxDistance=f.maxDistance,T.refDistance=f.refDistance,T.rolloffFactor=f.rolloffFactor,T.panningModel=f.panningModel}return o},Sound.prototype.init=function(o){return function(){var u=this,s=u._parent;u._orientation=s._orientation,u._stereo=s._stereo,u._pos=s._pos,u._pannerAttr=s._pannerAttr,o.call(this),u._stereo?s.stereo(u._stereo):u._pos&&s.pos(u._pos[0],u._pos[1],u._pos[2],u._id)}}(Sound.prototype.init),Sound.prototype.reset=function(o){return function(){var u=this,s=u._parent;return u._orientation=s._orientation,u._stereo=s._stereo,u._pos=s._pos,u._pannerAttr=s._pannerAttr,u._stereo?s.stereo(u._stereo):u._pos?s.pos(u._pos[0],u._pos[1],u._pos[2],u._id):u._panner&&(u._panner.disconnect(0),u._panner=void 0,s._refreshBuffer(u)),o.call(this)}}(Sound.prototype.reset);var g=function(o,u){u=u||"spatial",u==="spatial"?(o._panner=Howler.ctx.createPanner(),o._panner.coneInnerAngle=o._pannerAttr.coneInnerAngle,o._panner.coneOuterAngle=o._pannerAttr.coneOuterAngle,o._panner.coneOuterGain=o._pannerAttr.coneOuterGain,o._panner.distanceModel=o._pannerAttr.distanceModel,o._panner.maxDistance=o._pannerAttr.maxDistance,o._panner.refDistance=o._pannerAttr.refDistance,o._panner.rolloffFactor=o._pannerAttr.rolloffFactor,o._panner.panningModel=o._pannerAttr.panningModel,typeof o._panner.positionX<"u"?(o._panner.positionX.setValueAtTime(o._pos[0],Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(o._pos[1],Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(o._pos[2],Howler.ctx.currentTime)):o._panner.setPosition(o._pos[0],o._pos[1],o._pos[2]),typeof o._panner.orientationX<"u"?(o._panner.orientationX.setValueAtTime(o._orientation[0],Howler.ctx.currentTime),o._panner.orientationY.setValueAtTime(o._orientation[1],Howler.ctx.currentTime),o._panner.orientationZ.setValueAtTime(o._orientation[2],Howler.ctx.currentTime)):o._panner.setOrientation(o._orientation[0],o._orientation[1],o._orientation[2])):(o._panner=Howler.ctx.createStereoPanner(),o._panner.pan.setValueAtTime(o._stereo,Howler.ctx.currentTime)),o._panner.connect(o._node),o._paused||o._parent.pause(o._id,!0).play(o._id,!0)}})()}(H)),H}var q=V();const C=G("player",{state:()=>({playlist:[],currentIndex:0,currentSong:null,isPlaying:!1,sound:null,progress:0,duration:0,isShuffle:!1,isLoop:!1,volume:.2,_mediaListenerActive:!1,currentPlaylistType:null,currentPlaylistId:null,_isLoadingSong:!1,_lastRegistroTime:null}),actions:{async playSong(v,g=null){var u;if(this._isLoadingSong)return;if(this._isLoadingSong=!0,g!==null&&(this.currentIndex=g),((u=this.currentSong)==null?void 0:u.id)===v.id&&this.sound){if(!this.sound.playing()){const s=this.progress>0?this.progress:0;this.sound.seek(s),this.sound.play(),this.isPlaying=!0,requestAnimationFrame(this.updateProgress)}this._isLoadingSong=!1;return}const o=this.sound?this.sound.volume():this.volume;this.sound&&(this.sound.off(),this.sound.stop(),this.sound.unload(),this.sound=null),this.progress=0,this.currentSong=v,this.sound=new q.Howl({src:[v.archivo],html5:!0,volume:o,onend:()=>{this.isPlaying&&this.nextSong()},onload:()=>{this.duration=this.sound.duration(),this.sound.play(),this.isPlaying=!0,requestAnimationFrame(this.updateProgress),this.registrarUltimoEscuchado(),this._isLoadingSong=!1,e},onplay:()=>{this.isPlaying=!0,requestAnimationFrame(this.updateProgress)},onpause:()=>{const s=this.sound.seek();this.progress=s,this.isPlaying=!1},onstop:()=>{this.isPlaying=!1},onerror:()=>{this._isLoadingSong=!1}}),this._setupMediaListeners()},async registrarUltimoEscuchado(){var v;try{if(this._lastRegistroTime&&Date.now()-this._lastRegistroTime<5e3)return;const g={};if(this.currentPlaylistType&&this.currentPlaylistId)this.currentPlaylistType==="album"?g.id_album=this.currentPlaylistId:this.currentPlaylistType==="lista"&&(g.id_lista=this.currentPlaylistId);else if((v=this.currentSong)!=null&&v.album_id)g.id_album=this.currentSong.album_id;else return;this._lastRegistroTime=Date.now(),await E.post("/api/ultimo_escuchado",g)}catch{}},togglePlay(){if(this.sound)if(this.sound.playing()){const v=this.sound.seek();this.progress=v,this.sound.pause(),this.isPlaying=!1}else this.progress>0&&this.progress<this.duration?this.sound.seek(this.progress):(this.progress=0,this.sound.seek(0)),this.sound.play(),this.isPlaying=!0,requestAnimationFrame(this.updateProgress)},nextSong(){if(this.playlist.length){if(this.isShuffle){let v;do v=Math.floor(Math.random()*this.playlist.length);while(v===this.currentIndex&&this.playlist.length>1);this.currentIndex=v}else if(this.currentIndex<this.playlist.length-1)this.currentIndex++;else if(this.isLoop)this.currentIndex=0;else{this.sound&&this.sound.stop(),this.isPlaying=!1;return}this.playSong(this.playlist[this.currentIndex])}},prevSong(){if(this.sound&&this.sound.seek()>3){this.sound.seek(0);return}this.currentIndex>0&&(this.currentIndex--,this.playSong(this.playlist[this.currentIndex]))},toggleShuffle(){this.isShuffle=!this.isShuffle},toggleLoop(){this.isLoop=!this.isLoop},updateProgress(){this.sound&&this.sound.playing()&&(this.progress=this.sound.seek(),requestAnimationFrame(this.updateProgress))},setSeek(v){if(this.sound){const g=Math.max(0,Math.min(v,this.duration));this.progress=g,this.sound.seek(g),this.isPlaying?requestAnimationFrame(this.updateProgress):this.sound.pause()}},setPlaylist(v,g=null,o=null){JSON.stringify(this.playlist)!==JSON.stringify(v)&&(this.playlist=[...v],this.currentIndex=0),this.currentPlaylistType=g,this.currentPlaylistId=o,v.length&&!this.sound&&this.playSong(v[0])},setVolume(v){this.volume=v,this.sound&&this.sound.volume(v)},_setupMediaListeners(){this._mediaListenerActive||"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{this.togglePlay()}),navigator.mediaSession.setActionHandler("pause",()=>{this.togglePlay()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.prevSong()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.nextSong()}),this._mediaListenerActive=!0)}}});export{C as u};
